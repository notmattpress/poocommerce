.wc-block-add-to-cart-form {
	/**
	* This is a base style for the input text element in PooCommerce that prevents inputs from appearing too small.
	*
	* @link https://github.com/poocommerce/poocommerce/blob/95ca53675f2817753d484583c96ca9ab9f725172/plugins/poocommerce/client/legacy/css/poocommerce-blocktheme.scss#L203-L206
	*/
	.input-text {
		font-size: var(--wp--preset--font-size--small);
		padding: 0.9rem 1.1rem;
	}

}

/*
 * Set the layout of the add-to-cart form to a grid.
 */
.wp-block-poocommerce-add-to-cart-form {
	width: unset;
	.variations_button,
	form.cart {
		--whole-width-in-grid: span 9999; // A large number to span the whole width of the grid.
		&::before {
			content: " ";
			grid-column: var(--whole-width-in-grid);
		}

		display: grid;

		> * {
			// Hack to ensure input + button stat on the same row, together.
			grid-column: var(--whole-width-in-grid);
		}

		> .quantity,
		> .single_add_to_cart_button {
			grid-column: span 1;
			justify-self: start;
		}

		> .quantity:not(.wc-block-components-quantity-selector) .qty {
			margin-right: 0.5em;
			padding-top: 0;
			padding-bottom: 0;
			height: calc(100% - 4px); // 4px border width
		}

		&.grouped_form {
			width: fit-content;
			word-break: normal;
		}
	}

	.quantity {
		margin-right: 4px;
		// PooCommerce core styles: https://github.com/poocommerce/poocommerce/blob/c9f62609155825cd817976c7611b9b0415e90f2f/plugins/poocommerce/client/legacy/css/poocommerce.scss/#L111-L112
		.qty {
			width: 3.631em;
			text-align: center;
		}
	}
}


// Stepper CSS
div.wc-block-add-to-cart-form.wc-block-add-to-cart-form--stepper {
	form.cart {
		div.wc-block-components-quantity-selector {
			display: inline-flex;
			width: unset;
			background-color: #fff;
			margin-right: 0.5em;
			margin-bottom: 0;
		}
	}

	// Grouped Product
	table.poocommerce-grouped-product-list.group_table > tbody {
		td .wc-block-components-quantity-selector {
			input.input-text.qty.text {
				min-width: 60px;
			}
		}

		// Grouped Product
		td.poocommerce-grouped-product-list-item__label,
		td.poocommerce-grouped-product-list-item__price {
			vertical-align: middle;
		}
	}

	// Product Variation
	.poocommerce-variation-add-to-cart.variations_button.poocommerce-variation-add-to-cart-enabled,
	.poocommerce-variation-add-to-cart.variations_button.poocommerce-variation-add-to-cart-disabled {
		display: flex;

		.wc-block-components-quantity-selector {
			height: unset;
		}
	}

	.wc-block-components-quantity-selector {
		display: inline-flex;

		.input-text {
			font-size: var(--wp--preset--font-size--small);
		}

		input[type="number"]::-webkit-inner-spin-button,
		input[type="number"]::-webkit-outer-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}

		input[type="number"].input-text.qty.text {
			-moz-appearance: textfield;
			border: unset;
			text-align: center;
			order: 1;
			margin: 0;
			/**
			* This is a base style for the input text element in PooCommerce that prevents inputs from appearing too small.
			*
			* @link https://github.com/poocommerce/poocommerce/blob/95ca53675f2817753d484583c96ca9ab9f725172/plugins/poocommerce/client/legacy/css/poocommerce-blocktheme.scss#L203-L206
			*/
			padding: 0.9rem 0;
			margin-right: unset;
			font-size: var(--wp--preset--font-size--small);
		}
	}
}

// Inner of Single Product Block
.wp-block-poocommerce-single-product {
	.wc-block-add-to-cart-form.wc-block-add-to-cart-form--stepper {
		.wc-block-components-quantity-selector {
			width: 107px;
		}
	}
	.input-text.qty.text {
		// PooCommerce core styles: https://github.com/poocommerce/poocommerce/blob/c9f62609155825cd817976c7611b9b0415e90f2f/plugins/poocommerce/client/legacy/css/poocommerce.scss/#L111-L112
		width: 3.631em;
	}
}
